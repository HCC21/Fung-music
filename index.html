<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<title>My Premium Music Player</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
  body { font-family: Arial; background: #121212; color: white; text-align: center; padding: 20px; }

  .player-box {
    width: 300px; margin: 0 auto;
  }

  /* é»‘è† å”±ç‰‡ */
  .vinyl {
    width: 250px; height: 250px;
    border-radius: 50%;
    background-size: cover;
    margin: 20px auto;
    animation: spin 6s linear infinite;
    animation-play-state: paused;
  }
  @keyframes spin { 100% { transform: rotate(360deg); } }

  /* æ³¢å½¢å‹•ç•« */
  .bars {
    display: flex; justify-content: center; margin: 20px 0;
  }
  .bars div {
    width: 5px; height: 20px; background: #1DB954;
    margin: 0 3px; animation: bounce 0.6s infinite alternate;
  }
  .bars div:nth-child(2) { animation-delay: 0.1s; }
  .bars div:nth-child(3) { animation-delay: 0.2s; }
  .bars div:nth-child(4) { animation-delay: 0.3s; }
  @keyframes bounce { from { height: 10px; } to { height: 40px; } }

  /* æ’­æ”¾æ¸…å–® */
  ul { list-style: none; padding: 0; }
  li { padding: 10px; cursor: pointer; }
  li.active { background: #1DB954; }
</style>
</head>
<body>

<h1>ğŸ§ My Premium Music Player</h1>

<div class="player-box">
  <div id="vinyl" class="vinyl"></div>

  <audio id="player" controls style="width:100%;"></audio>

  <div class="bars">
    <div></div><div></div><div></div><div></div>
  </div>
</div>

<h2>æ’­æ”¾æ¸…å–®</h2>
<ul id="playlist">
  <li data-src="song1.mp3" data-cover="covers/song1.jpg">Song 1<div id="qr1"></div></li>
  <li data-src="song2.mp3" data-cover="covers/song2.jpg">Song 2<div id="qr2"></div></li>
  <li data-src="song3.mp3" data-cover="covers/song3.jpg">Song 3<div id="qr3"></div></li>
</ul>

<button id="loopBtn">ğŸ” å¾ªç’°</button>
<button id="shuffleBtn">ğŸ”€ éš¨æ©Ÿ</button>

<script>
const player = document.getElementById("player");
const vinyl = document.getElementById("vinyl");
const items = document.querySelectorAll("#playlist li");

let loop = false;
let shuffle = false;

function playSong(item) {
  items.forEach(li => li.classList.remove("active"));
  item.classList.add("active");

  const src = item.getAttribute("data-src");
  const cover = item.getAttribute("data-cover");

  player.src = src;
  vinyl.style.backgroundImage = `url(${cover})`;

  player.play();
  vinyl.style.animationPlayState = "running";
}

items.forEach((item, index) => {
  item.addEventListener("click", () => playSong(item));

  // QR Code
  new QRCode(document.getElementById(`qr${index+1}`), {
    text: window.location.href.replace("index.html", "") + item.getAttribute("data-src"),
    width: 80, height: 80
  });
});

// å¾ªç’°æ’­æ”¾
document.getElementById("loopBtn").onclick = () => {
  loop = !loop;
  player.loop = loop;
  alert(loop ? "å·²é–‹å•Ÿå¾ªç’°æ’­æ”¾" : "å·²é—œé–‰å¾ªç’°æ’­æ”¾");
};

// éš¨æ©Ÿæ’­æ”¾
document.getElementById("shuffleBtn").onclick = () => {
  shuffle = !shuffle;
  alert(shuffle ? "å·²é–‹å•Ÿéš¨æ©Ÿæ’­æ”¾" : "å·²é—œé–‰éš¨æ©Ÿæ’­æ”¾");
};

// è‡ªå‹•æ’­æ”¾ä¸‹ä¸€é¦–
player.onended = () => {
  if (shuffle) {
    const random = Math.floor(Math.random() * items.length);
    playSong(items[random]);
  } else {
    let current = [...items].findIndex(li => li.classList.contains("active"));
    let next = (current + 1) % items.length;
    playSong(items[next]);
  }
};

// é è¨­æ’­æ”¾ç¬¬ä¸€é¦–
playSong(items[0]);
</script>

</body>
</html>